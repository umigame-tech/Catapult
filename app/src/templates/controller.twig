<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\Http\Requests\{{ requestName }};
use App\Models\{{ modelName }};

class {{ controllerName }} extends Controller
{
    public function index({{ modelName }} ${{ entity['name'] }})
    {
        return view('{{ entity['name'] }}.index', [
            '{{ plural }}' => ${{ entity['name'] }}->get(),
        ]);
    }

    public function show({{ modelName }} ${{ entity['name'] }}, $id)
    {
        return view('{{ entity['name'] }}.show', [
            '{{ entity['name'] }}' => ${{ entity['name'] }}->findOrFail($id),
        ]);
    }

    public function new({{ requestName }} $request, {{ modelName }} ${{ entity['name'] }})
    {
        // Cancelで戻ってきた場合にセッションから値を取得する処理
        ${{ entity['name'] }}->fill($request->session()->get('{{ entity['name'] }}.form', []));

        return view('{{ entity['name'] }}.new', [
            '{{ entity['name'] }}' => ${{ entity['name'] }},
        ]);
    }

    public function createConfirm({{ requestName }} $request, {{ modelName }} ${{ entity['name'] }})
    {
        ${{ entity['name'] }}->fill($request->all());
        $request->session()->put('{{ entity['name'] }}.form', ${{ entity['name'] }}->toArray());

        return view('{{ entity['name'] }}.createConfirm', [
            '{{ entity['name'] }}' => ${{ entity['name'] }},
        ]);
    }

    public function create(Request $request, {{ modelName }} ${{ entity['name'] }})
    {
        ${{ entity['name'] }}->fill($request->session()->get('{{ entity['name'] }}.form', []));
        ${{ entity['name'] }}->save();
        $request->session()->forget('{{ entity['name'] }}.form');

        return redirect()->route('{{ entity['name'] }}.index');
    }

    public function edit({{ modelName }} ${{ entity['name'] }}, $id)
    {
        ${{ entity['name'] }} = ${{ entity['name'] }}->findOrFail($id);

        return view('{{ entity['name'] }}.edit', [
            '{{ entity['name'] }}' => ${{ entity['name'] }},
        ]);
    }

    public function editConfirm() { }
    public function update() { }
    public function deleteConfirm() { }
    public function delete() { }
}
